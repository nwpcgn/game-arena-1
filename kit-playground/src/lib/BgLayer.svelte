<script lang="ts">
	const bgEl = {
		width: 3072,
		height: 1024
	}
	let width = $state(0)
	let height = $state(0)
	let fW = $state(0)
	let fH = $state(0)
	let x = $state(0)
	let end = $derived(fW - width)

	$effect(() => {
		if (fH) {
			height = fH
			width = (bgEl.width / bgEl.height) * fH
		}
	})
</script>

<section class="page-layer" bind:clientHeight={fH} bind:clientWidth={fW}>
	{@render bgT(width, height)}
</section>

<div
	class="rounded-box bg-base-100 absolute right-4 bottom-4 flex flex-col gap-1 p-4 shadow-sm">
	<div class="flex items-center justify-between gap-4">
		<span class="font-light italic">Window</span>
		<span>{fW} x {fH}</span>
	</div>
	<div class="flex items-center justify-between gap-4">
		<span class="font-light italic">Bg Layer</span>
		<span>{width} x {height}</span>
	</div>
	<div class="flex items-center justify-between gap-4">
		<span class="font-light italic">Position</span>
		<span>{x} | {end}</span>
	</div>
</div>

{#snippet bgT(width, height)}
	<svg {width} {height} style="--x: {x}px;" viewBox="0 0 3072 1024.667"
		><g id="bg-layer-1"
			><g
				><rect width="1024.667" height="1024.667" /><path
					id="Path"
					d="M1024.67 0L0 0L0 1024.67L1024.67 1024.67L1024.67 0L1024.67 0Z"
					fill="#D5EDF7"
					fill-rule="evenodd" /><path
					id="Path"
					d="M866.464 112.873C857.425 112.873 849.703 115.842 843.299 121.779C842.365 122.68 841.481 123.614 840.647 124.581C824.804 110.772 805.858 103.868 783.81 103.868C779.341 103.868 774.988 104.168 770.752 104.768C770.418 104.435 770.085 104.118 769.751 103.818C763.414 97.847 755.709 94.8618 746.636 94.8618C741.499 94.8618 736.763 95.8624 732.427 97.8637C732.427 97.8637 732.377 97.8637 732.377 97.8637C732.377 97.6969 732.393 97.5302 732.427 97.3634C732.494 96.6629 732.527 95.9792 732.527 95.3121C732.527 95.0119 732.527 94.7617 732.527 94.5616C732.527 94.2281 732.527 93.8778 732.527 93.5109C732.26 85.539 729.058 78.7013 722.921 72.9975C716.55 67.0603 708.845 64.0917 699.806 64.0917C697.804 64.0917 695.903 64.2419 694.102 64.542C692.601 59.8056 689.832 55.5695 685.796 51.8337C679.426 45.8966 671.721 42.928 662.681 42.928C653.642 42.928 645.937 45.8966 639.566 51.8337C635.197 55.9031 632.312 60.5561 630.911 65.7928C616.768 68.4946 604.143 74.5319 593.036 83.9047C587.366 79.7686 580.745 77.7006 573.173 77.7006C564.134 77.7006 556.412 80.6692 550.008 86.6064C545.372 90.9425 542.42 95.9625 541.152 101.666C535.515 100.565 529.645 100.015 523.541 100.015C521.606 100.015 519.672 100.082 517.737 100.215C516.336 95.0786 513.484 90.4923 509.182 86.4563C502.844 80.5191 495.139 77.5505 486.066 77.5505C477.027 77.5505 469.306 80.5191 462.901 86.4563C462.668 86.7231 462.468 86.9566 462.301 87.1568C458.765 81.6198 454.396 76.4164 449.192 71.5466C432.882 56.37 413.202 48.7651 390.154 48.7318C388.586 45.1628 386.235 41.9273 383.099 39.0254C376.729 33.0883 369.007 30.1197 359.934 30.1197C356.866 30.1197 353.997 30.4532 351.329 31.1203C350.728 23.7822 347.543 17.4447 341.772 12.1079C335.402 6.17072 327.697 3.20209 318.657 3.20209C312.187 3.20209 306.45 4.70306 301.446 7.70502C290.306 2.56833 278.031 0 264.622 0C241.474 0 221.744 7.60492 205.434 22.8148C197.862 29.8528 192.058 37.5578 188.022 45.9299C185.754 45.4963 183.369 45.2795 180.868 45.2795C171.895 45.2795 164.19 48.2314 157.753 54.1353C151.749 59.7389 148.597 66.4933 148.297 74.3985C148.263 74.7987 148.247 75.2323 148.247 75.6993C148.247 76.5665 148.28 77.4338 148.347 78.301C148.647 81.9034 149.581 85.3055 151.148 88.5077C150.048 90.8091 149.247 93.244 148.747 95.8124C140.375 99.5148 132.636 104.685 125.532 111.322C122.53 114.124 119.795 117.06 117.326 120.128C112.223 117.093 106.419 115.575 99.915 115.575C90.8758 115.575 83.1875 118.544 76.85 124.481C72.0803 128.884 69.095 133.971 67.8942 139.741C67.3605 139.741 66.8268 139.741 66.2932 139.741C53.2847 139.741 41.3603 142.176 30.5199 147.046C25.9169 144.744 20.8469 143.593 15.31 143.593C9.67296 143.593 4.56964 144.761 0 147.096C0 147.096 0 399.11 0 399.11L1024.67 399.11C1024.67 399.11 1024.67 150.348 1024.67 150.348C1024.4 139.841 1020.53 130.852 1013.06 123.38C1006.39 116.709 998.55 112.907 989.544 111.973C988.11 109.905 986.459 107.937 984.591 106.069C976.819 98.2973 967.48 94.4115 956.573 94.4115C951.903 94.4115 947.534 95.1286 943.464 96.5629C937.994 98.4307 933.041 101.599 928.605 106.069C922.401 112.24 918.681 119.461 917.447 127.733C910.343 128.6 903.622 130.301 897.284 132.837C895.716 128.734 893.148 125.048 889.579 121.779C883.242 115.842 875.537 112.873 866.464 112.873C866.464 112.873 866.464 112.873 866.464 112.873Z"
					fill="#E6F4FA"
					fill-rule="evenodd"
					transform="translate(0 396.308)" /><path
					id="Path"
					d="M1024.62 17.1997C1001.34 25.4717 978.47 34.7444 956.022 45.0178C916.697 63.0295 876.487 64.4471 835.394 49.2706C797.302 35.1614 758.811 22.2863 719.919 10.6454C679.993 -1.26233 639.55 -3.18024 598.59 4.89166C557.696 12.9636 518.621 25.8553 481.363 43.5668C443.706 61.3451 403.846 70.3843 361.786 70.6845C319.792 71.0515 279.148 64.0969 239.856 49.8209C201.765 35.8785 162.923 24.2376 123.33 14.8982C81.9367 5.22522 40.8266 5.99237 0 17.1997C0 17.1997 0 406.753 0 406.753L1024.62 406.753L1024.62 17.1997C1024.62 17.1997 1024.62 17.1997 1024.62 17.1997Z"
					fill="#B6D9E7"
					fill-rule="evenodd"
					transform="translate(0.05 617.914)" /></g
			><g transform="translate(1023.666 0)"
				><rect width="1024.667" height="1024.667" /><path
					id="Path"
					d="M1024.67 0L0 0L0 1024.67L1024.67 1024.67L1024.67 0L1024.67 0Z"
					fill="#D5EDF7"
					fill-rule="evenodd" /><path
					id="Path"
					d="M866.464 112.873C857.425 112.873 849.703 115.842 843.299 121.779C842.365 122.68 841.481 123.614 840.647 124.581C824.804 110.772 805.858 103.868 783.81 103.868C779.341 103.868 774.988 104.168 770.752 104.768C770.418 104.435 770.085 104.118 769.751 103.818C763.414 97.847 755.709 94.8618 746.636 94.8618C741.499 94.8618 736.763 95.8624 732.427 97.8637C732.427 97.8637 732.377 97.8637 732.377 97.8637C732.377 97.6969 732.393 97.5302 732.427 97.3634C732.493 96.6629 732.527 95.9792 732.527 95.3121C732.527 95.0119 732.527 94.7617 732.527 94.5616C732.527 94.2281 732.527 93.8778 732.527 93.5109C732.26 85.539 729.058 78.7013 722.921 72.9975C716.55 67.0603 708.845 64.0917 699.805 64.0917C697.804 64.0917 695.903 64.2419 694.102 64.542C692.601 59.8056 689.832 55.5695 685.796 51.8337C679.426 45.8966 671.721 42.928 662.681 42.928C653.642 42.928 645.937 45.8966 639.566 51.8337C635.197 55.9031 632.312 60.5561 630.911 65.7928C616.768 68.4946 604.143 74.5319 593.036 83.9047C587.366 79.7686 580.745 77.7006 573.173 77.7006C564.134 77.7006 556.412 80.6692 550.008 86.6064C545.372 90.9425 542.42 95.9625 541.152 101.666C535.515 100.565 529.645 100.015 523.541 100.015C521.606 100.015 519.672 100.082 517.737 100.215C516.336 95.0786 513.484 90.4923 509.181 86.4563C502.844 80.5191 495.139 77.5505 486.066 77.5505C477.027 77.5505 469.305 80.5191 462.901 86.4563C462.668 86.7231 462.468 86.9566 462.301 87.1568C458.765 81.6198 454.396 76.4164 449.192 71.5466C432.882 56.37 413.202 48.7651 390.154 48.7318C388.586 45.1628 386.235 41.9273 383.099 39.0254C376.729 33.0883 369.007 30.1197 359.934 30.1197C356.866 30.1197 353.997 30.4532 351.329 31.1203C350.728 23.7822 347.543 17.4447 341.772 12.1079C335.402 6.17072 327.697 3.20209 318.657 3.20209C312.187 3.20209 306.449 4.70306 301.446 7.70502C290.306 2.56833 278.031 0 264.622 0C241.474 0 221.744 7.60492 205.434 22.8148C197.862 29.8528 192.058 37.5578 188.022 45.9299C185.754 45.4963 183.369 45.2795 180.868 45.2795C171.895 45.2795 164.19 48.2314 157.753 54.1353C151.749 59.7389 148.597 66.4933 148.297 74.3985C148.263 74.7987 148.246 75.2323 148.246 75.6993C148.246 76.5665 148.28 77.4338 148.347 78.301C148.647 81.9034 149.581 85.3055 151.148 88.5077C150.048 90.8091 149.247 93.244 148.747 95.8124C140.375 99.5148 132.636 104.685 125.532 111.322C122.53 114.124 119.795 117.06 117.326 120.128C112.223 117.093 106.419 115.575 99.915 115.575C90.8758 115.575 83.1875 118.544 76.85 124.481C72.0803 128.884 69.095 133.971 67.8942 139.741C67.3605 139.741 66.8268 139.741 66.2932 139.741C53.2847 139.741 41.3603 142.176 30.5199 147.046C25.9169 144.744 20.8469 143.593 15.31 143.593C9.67296 143.593 4.56964 144.761 0 147.096C0 147.096 0 399.11 0 399.11L1024.67 399.11C1024.67 399.11 1024.67 150.348 1024.67 150.348C1024.4 139.841 1020.53 130.852 1013.06 123.38C1006.39 116.709 998.55 112.907 989.544 111.973C988.11 109.905 986.459 107.937 984.591 106.069C976.819 98.2973 967.48 94.4115 956.573 94.4115C951.903 94.4115 947.533 95.1286 943.464 96.5629C937.994 98.4307 933.041 101.599 928.604 106.069C922.4 112.24 918.681 119.461 917.447 127.733C910.343 128.6 903.622 130.301 897.284 132.837C895.716 128.734 893.148 125.048 889.579 121.779C883.242 115.842 875.537 112.873 866.464 112.873C866.464 112.873 866.464 112.873 866.464 112.873Z"
					fill="#E6F4FA"
					fill-rule="evenodd"
					transform="translate(0 396.308)" /><path
					id="Path"
					d="M1024.62 17.1997C1001.34 25.4717 978.47 34.7444 956.022 45.0178C916.697 63.0295 876.487 64.4471 835.394 49.2706C797.302 35.1614 758.811 22.2863 719.919 10.6454C679.993 -1.26233 639.55 -3.18024 598.59 4.89166C557.696 12.9636 518.621 25.8553 481.363 43.5668C443.706 61.3451 403.846 70.3843 361.785 70.6845C319.792 71.0515 279.148 64.0969 239.856 49.8209C201.765 35.8785 162.923 24.2376 123.33 14.8982C81.9367 5.22522 40.8266 5.99237 0 17.1997C0 17.1997 0 406.753 0 406.753L1024.62 406.753L1024.62 17.1997C1024.62 17.1997 1024.62 17.1997 1024.62 17.1997Z"
					fill="#B6D9E7"
					fill-rule="evenodd"
					transform="translate(0.05 617.914)" /></g
			><g transform="translate(2047.333 0)"
				><rect width="1024.667" height="1024.667" /><path
					id="Path"
					d="M1024.67 0L0 0L0 1024.67L1024.67 1024.67L1024.67 0L1024.67 0Z"
					fill="#D5EDF7"
					fill-rule="evenodd" /><path
					id="Path"
					d="M866.464 112.873C857.425 112.873 849.703 115.842 843.299 121.779C842.365 122.68 841.481 123.614 840.647 124.581C824.804 110.772 805.858 103.868 783.81 103.868C779.341 103.868 774.988 104.168 770.752 104.768C770.418 104.435 770.085 104.118 769.751 103.818C763.414 97.847 755.709 94.8618 746.636 94.8618C741.499 94.8618 736.763 95.8624 732.427 97.8637C732.427 97.8637 732.377 97.8637 732.377 97.8637C732.377 97.6969 732.393 97.5302 732.427 97.3634C732.494 96.6629 732.527 95.9792 732.527 95.3121C732.527 95.0119 732.527 94.7617 732.527 94.5616C732.527 94.2281 732.527 93.8778 732.527 93.5109C732.26 85.539 729.058 78.7013 722.921 72.9975C716.55 67.0603 708.845 64.0917 699.806 64.0917C697.804 64.0917 695.903 64.2419 694.102 64.542C692.601 59.8056 689.832 55.5695 685.796 51.8337C679.426 45.8966 671.721 42.928 662.681 42.928C653.642 42.928 645.937 45.8966 639.566 51.8337C635.197 55.9031 632.312 60.5561 630.911 65.7928C616.768 68.4946 604.143 74.5319 593.036 83.9047C587.366 79.7686 580.745 77.7006 573.173 77.7006C564.134 77.7006 556.412 80.6692 550.008 86.6064C545.372 90.9425 542.42 95.9625 541.152 101.666C535.515 100.565 529.645 100.015 523.541 100.015C521.606 100.015 519.672 100.082 517.737 100.215C516.336 95.0786 513.484 90.4923 509.182 86.4563C502.844 80.5191 495.139 77.5505 486.066 77.5505C477.027 77.5505 469.306 80.5191 462.901 86.4563C462.668 86.7231 462.468 86.9566 462.301 87.1568C458.765 81.6198 454.396 76.4164 449.192 71.5466C432.882 56.37 413.202 48.7651 390.154 48.7318C388.586 45.1628 386.235 41.9273 383.099 39.0254C376.729 33.0883 369.007 30.1197 359.934 30.1197C356.866 30.1197 353.997 30.4532 351.329 31.1203C350.728 23.7822 347.543 17.4447 341.772 12.1079C335.402 6.17072 327.697 3.20209 318.657 3.20209C312.187 3.20209 306.45 4.70306 301.446 7.70502C290.306 2.56833 278.031 0 264.622 0C241.474 0 221.744 7.60492 205.434 22.8148C197.862 29.8528 192.058 37.5578 188.022 45.9299C185.754 45.4963 183.369 45.2795 180.868 45.2795C171.895 45.2795 164.19 48.2314 157.753 54.1353C151.749 59.7389 148.597 66.4933 148.297 74.3985C148.263 74.7987 148.247 75.2323 148.247 75.6993C148.247 76.5665 148.28 77.4338 148.347 78.301C148.647 81.9034 149.581 85.3055 151.148 88.5077C150.048 90.8091 149.247 93.244 148.747 95.8124C140.375 99.5148 132.636 104.685 125.532 111.322C122.53 114.124 119.795 117.06 117.326 120.128C112.223 117.093 106.419 115.575 99.915 115.575C90.8758 115.575 83.1875 118.544 76.85 124.481C72.0803 128.884 69.095 133.971 67.8942 139.741C67.3605 139.741 66.8268 139.741 66.2932 139.741C53.2847 139.741 41.3603 142.176 30.5199 147.046C25.9169 144.744 20.8469 143.593 15.31 143.593C9.67296 143.593 4.56964 144.761 0 147.096C0 147.096 0 399.11 0 399.11L1024.67 399.11C1024.67 399.11 1024.67 150.348 1024.67 150.348C1024.4 139.841 1020.53 130.852 1013.06 123.38C1006.39 116.709 998.55 112.907 989.544 111.973C988.11 109.905 986.459 107.937 984.591 106.069C976.819 98.2973 967.48 94.4115 956.573 94.4115C951.903 94.4115 947.534 95.1286 943.464 96.5629C937.994 98.4307 933.041 101.599 928.605 106.069C922.401 112.24 918.681 119.461 917.447 127.733C910.343 128.6 903.622 130.301 897.284 132.837C895.716 128.734 893.148 125.048 889.579 121.779C883.242 115.842 875.537 112.873 866.464 112.873C866.464 112.873 866.464 112.873 866.464 112.873Z"
					fill="#E6F4FA"
					fill-rule="evenodd"
					transform="translate(0 396.308)" /><path
					id="Path"
					d="M1024.62 17.1997C1001.34 25.4717 978.47 34.7444 956.022 45.0178C916.697 63.0295 876.487 64.4471 835.394 49.2706C797.302 35.1614 758.811 22.2863 719.919 10.6454C679.993 -1.26233 639.55 -3.18024 598.59 4.89166C557.696 12.9636 518.621 25.8553 481.363 43.5668C443.706 61.3451 403.846 70.3843 361.786 70.6845C319.792 71.0515 279.148 64.0969 239.856 49.8209C201.765 35.8785 162.923 24.2376 123.33 14.8982C81.9367 5.22522 40.8266 5.99237 0 17.1997C0 17.1997 0 406.753 0 406.753L1024.62 406.753L1024.62 17.1997C1024.62 17.1997 1024.62 17.1997 1024.62 17.1997Z"
					fill="#B6D9E7"
					fill-rule="evenodd"
					transform="translate(0.05 617.914)" /></g
			></g
		></svg>
{/snippet}

<style>
	svg {
		position: absolute;
		top: 0px;
		left: var(--x, 0px);
	}
</style>
